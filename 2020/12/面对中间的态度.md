# 面对中间的态度

工作多年发现很多业务开发都对中间件情有独钟, 不断的看总结文档, 然后写个总结的总结, 代码设计上完全没用到中间中的思想和设计. 就像: 看了多个熔断和降级框架, 而实现的时候从来不考虑熔断和降级, 只有当出现问题后才考虑使用熔断和降级, 一大堆理论和没有是差不多. 但是只要提到中间件就一个又一个名词脱口而出, 什么时间轮, 令牌桶, 流量池, 动态代理, 控制反转, zk的一致性, raft协议, 零拷贝, 等等, 然后就没有然后了.

我作为一个业务开发过程中不应该关注中间件中的实现细节和设计方案, 核心应该关系中间件提供的模型. 比如:Kafka提供的就是消息队列, 说白了是一个不严格的FIFO队列, 关于怎么实现怎么部署, 内部使用了什么特殊技巧都不重要. **而做为业务或系统开发核心关注问题应该是某个中间件挂了我系统要如何处理?** 强依赖, 我跟着一起挂, 问题上抛; 业务不重要挂了就挂了, 直接把异常吞掉(真见过有人这么干); 设计一个Plan B, 存在应对策略. **第二个关注的问题是使用多少中间件独有特性?**, 用的特性越多迁移中间件成本越高, kafka和rocketmq, mysql和oracle, zk和etc等等. 中间件提供了一些原始模型保证, 这些模型迁移成本很低可能就是api的简单调整; 同时还提供了很多独有的特性, 这些独有特性根本无法迁移, 换个平台就不支持, 开源者对这个功能还很反对, 那就要自己来了.

我认为面对中间件态度简单来说, 要学习内部实现, 但使用的时候要当做一个无知者, 不要去依赖文档上没有写明的任何功能, 不要窥探源码中的实现并依赖中间件实现代码; 第二就是对中间件做一个简单封装层, 屏蔽掉未使用的功能, 做组件迁移的时候更简单些.

以上就是一些胡思乱想, 没啥实际意义, 一个更好定律**[隐式接口定律](https://github.com/zoroqi/hacker-laws-zh#%E9%9A%90%E5%BC%8F%E6%8E%A5%E5%8F%A3%E5%AE%9A%E5%BE%8B-hyrums-law-or-the-law-of-implicit-interfaces)**
